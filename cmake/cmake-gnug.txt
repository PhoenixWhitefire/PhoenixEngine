# settings formatted for G++

set(PHX_TRACY_LIB_PATH Vendor/tracy/${PHX_BUILD_TYPE}/TracyClient)

target_compile_options(PhoenixEngine PRIVATE $<$<CONFIG:RelTracy>:-O2 -g>)
target_compile_options(PhoenixEngine PRIVATE $<$<CONFIG:Release>:-O2>)
target_compile_options(PhoenixEngine PRIVATE $<$<CONFIG:Debug>:-O0 -g>)
target_compile_options(PhoenixEngine PRIVATE -MP)

# https://stackoverflow.com/a/9862800
target_compile_options(PhoenixEngine PRIVATE
	-pedantic -Wall -Wextra -Wcast-align
	-Wcast-qual -Wdisabled-optimization
	-Wformat=2 -Winit-self -Wlogical-op -Wmissing-declarations
	-Wmissing-include-dirs -Woverloaded-virtual
	-Wshadow -Wsign-promo
	-Wstrict-null-sentinel -Wstrict-overflow=2 -Wswitch-default
	-Wundef -Werror
	-Wno-shadow -Wstrict-aliasing=3 -Wno-missing-field-initializers
	-Wno-maybe-uninitialized -Wno-unused-parameter
)

target_compile_options(PhoenixEngine PRIVATE $<$<CONFIG:Debug>:-fsanitize=address>)

target_link_options(PhoenixEngine PRIVATE $<$<CONFIG:RelTracy>:-flto>)
target_link_options(PhoenixEngine PRIVATE $<$<CONFIG:Release>:-flto>)
target_link_options(PhoenixEngine PRIVATE $<$<CONFIG:Debug>:-fsanitize=address>)

add_compile_options($<$<CONFIG:RelTracy>:-O2>)
add_compile_options($<$<CONFIG:Release>:-O2>)
add_compile_options($<$<CONFIG:Debug>:-O0>)

add_compile_options(-MP)

# incremental warning with LTCG
add_link_options($<$<CONFIG:RelTracy>:-flto>)
add_link_options($<$<CONFIG:Release>:-flto>)

